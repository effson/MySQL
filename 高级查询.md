## 1. 基础查询
### 全部查询
```SQL
SELECT * FROM table_name;
```
### 查询部分字段
```SQL
SELECT `field1`, `field2` FROM table_name;
```
### 别名
```SQL
SELECT `field1` AS 'NAME1', `field2` AS 'NAME2' FROM table_name;
```
### 去除重复记录
```SQL
SELECT distinct `field1` FROM table_name;
```
## 2. 条件查询
```SQL
SELECT * FROM `table_name` WHERE `field` = 'value';
```
```SQL
SELECT * FROM `table_name` WHERE `field1` = 'value1' AND `field2` = 'value2';
```
## 3. 范围查询
```SQL
SELECT * FROM `table_name` WHERE `field` BETWEEN range1 AND range2;
```
## 4. 判空查询
```SQL
SELECT * FROM `table_name` WHERE `column_name` IS NULL;
SELECT * FROM `table_name` WHERE `column_name` IS NOT NULL;
```
```SQL
SELECT * FROM `table_name` WHERE `column_name` = ''; # 为空字符串

SELECT * FROM `table_name` WHERE `column_name` <> ''; # 不为空字符串
SELECT * FROM `table_name` WHERE `column_name` != ''; # 不为空字符串
```
## 5. 模糊查询
```SQL
SELECT * FROM  `table_name` WHERE `name` LIKE 'abc%'; # 以 'abc' 开头
```
```SQL
SELECT * FROM  `table_name` WHERE `name` LIKE '%abc'; # 以 'abc' 结尾
```
```SQL
SELECT * FROM  `table_name` WHERE `name` LIKE '%abc%'; # 查询 name 包含 'abc'
```
```SQL
SELECT * FROM table_name WHERE name LIKE '_b%'; # 查询 name 第2个字符是 'b'
```

## 6. 分页查询
```SQL
SELECT column1, column2, ... FROM table_name
LIMIT offset, row_count;
```
- offset：偏移量（从第几条数据开始，0 表示第一条）
- row_count：要返回的行数

## 7. 查询后排序
```SQL
SELECT * FROM  `table_name` ORDER BY  `sort_column` ASC;
```
```SQL
SELECT * FROM  `table_name` ORDER BY  `sort_column1` ASC, `sort_column2` DESC;
```
## 8. 聚合查询
- COUNT()
- SUM()
- AVG()
- MAX()
- MIN()
## 9. 分组查询
```SQL
SELECT 分组列, 聚合函数(...) FROM  `表名`
[WHERE 条件]
GROUP BY 分组列
[HAVING 聚合条件]
[ORDER BY 排序列]
```
### 按部门分组统计员工数
```SQL
SELECT  `department_id`, COUNT(*) AS emp_count FROM `employees`
GROUP BY `department_id`;
```

### 按部门分组计算平均工资
```SQL
SELECT `department_id`, AVG(salary) AS avg_salary FROM `employees`
GROUP BY `department_id`;
```

### 多列分组（部门 + 职位）
```SQL
SELECT `department_id`, `job_id`, COUNT(*) AS emp_count FROM `employees`
GROUP BY `department_id`, `job_id`;
```

### 分组后再筛选（HAVING）
```SQL
SELECT `department_id`, COUNT(*) AS emp_count FROM employees
GROUP BY `department_id` HAVING emp_count > 5;
```
### 分组后排序
```SQL
SELECT `department_id`, COUNT(*) AS emp_count FROM `employees`
GROUP BY `department_id` ORDER BY emp_count DESC;
```

## 10. 联表查询
假设有两张表：<br>
employees(id, name, dept_id)<br>
departments(id, dept_name)<br>
### INNER JOIN 交集
```SQL
SELECT e.name, d.dept_name FROM employees e
INNER JOIN departments d ON e.dept_id = d.id;
```
### LEFT JOIN
取左表所有记录，右表无匹配则为 NULL
```SQL
SELECT e.name, d.dept_name FROM employees e
LEFT JOIN departments d ON e.dept_id = d.id;
```
### RIGHT JOIN
取右表所有记录，左表无匹配则为 NULL
```SQL
SELECT e.name, d.dept_name FROM employees e
RIGHT JOIN departments d ON e.dept_id = d.id;
```

### IN与连表查询的联系
```SQL
SELECT * FROM student WHERE class_id IN 
(SELECT cid FROM course WHERE teacher_id = 2);
```
可转化为：
```SQL
SELECT student.sid, student.gender, student.class_id,student.sname FROM student INNER JOIN course ON
student.class_id = course.cid WHERE teacher_id = 2;
``
## 11. 子查询/合并查询
### 单行子查询
```SQL
SELECT name, salary FROM employees
WHERE salary = (SELECT salary FROM employees WHERE employee_id = 12);
```
